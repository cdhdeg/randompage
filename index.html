<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Random Github Page - London Weather</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <style>
    form label {
      display: block;
      padding: 1rem 0;
    }
  </style>
  </head>
  <body>
    <h1>Random Page</h1>
    <p>Hosting a random page on Github!</p>
    <h2>London Weather Forecast</h2>
    <div id="weather">Loading...</div>
    <h2>Contact</h2>
    <!-- modify this form HTML and place wherever you want your form -->
    <form
      action="https://formspree.io/f/mpzvbapg"
      method="POST"
    >
      <label>
        Your email:
        <input type="email" name="email">
      </label>
      <label>
        Your message:
        <textarea name="message"></textarea>
      </label>
      <!-- your other form fields go here -->
      <button type="submit">Send</button>
    </form>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Define the coordinates for London
          const latitude = 51.5074;  // London latitude
          const longitude = -0.1278; // London longitude
      
          // Construct the URL with query parameters for the API request
          const url = `http://www.7timer.info/bin/civillight.php?lon=${longitude}&lat=${latitude}&output=json`;
      
          // Function to fetch weather data
          async function fetchWeather() {
              try {
                  const response = await fetch(url); // Send the request to the 7Timer! API
                  if (!response.ok) {
                      throw new Error(`HTTP error! status: ${response.status}`);
                  }
                  const data = await response.json(); // Parse the JSON data
                  displayWeather(data); // Call function to display weather
              } catch (error) {
                  console.error("Failed to retrieve the weather data: ", error);
                  document.getElementById('weather').innerText = "Failed to load weather data.";
              }
          }
      
          // Function to display weather data
          function displayWeather(data) {
              const weatherContainer = document.getElementById('weather');
              if (data && data.dataseries) {
                  let weather = 'Weather for London\n';
                  for (let entry of data['dataseries']) {
                      let windspeed10m = entry['windspeed10m'] ? entry['windspeed10m'] : 'N/A';
                      weather += `
                      Date: ${entry['date']}\n
                      Temperature: ${entry['temp2m']}Â°C\n
                      Weather: ${entry['weather']}\n
                      Wind Speed: ${windspeed10m} km/h\n
                      `;
                  }
              } else {
                  weatherContainer.innerText = "No forecast data available.";
              }
          }
      
          // Call the function to fetch the weather
          fetchWeather();
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
